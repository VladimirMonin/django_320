## –ó–∞–Ω–∫–æ–º—Å—Ç–≤–æ —Å Django

### –ß—Ç–æ —Ç–∞–∫–æ–µ MTV?

1. –ü–∞—Ç—Ç–µ—Ä–Ω MTV
Models - –ú–æ–¥–µ–ª–∏ - –∫–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

Views - –í—å—é - –∫–ª–∞—Å—Å—ã –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∑–∞–ø—Ä–æ—Å—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ—Ç–≤–µ—Ç—ã.

Templates - –®–∞–±–ª–æ–Ω—ã - —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç HTML-–∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∫–ª–∏–µ–Ω—Ç—É.

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Django

–£—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ Django –∏ –æ–±–Ω–æ–≤–∏–ª–∏ requirements.txt

```bash
pip install django
pip freeze > requirements.txt
```

–°–æ–∑–¥–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç Django

```bash
django-admin startproject python_blog .
```

–°–æ–∑–¥–∞–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –¢–æ—á–∫–∞ - —Ç–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è.
–ò–Ω–∞—á–µ Django —Å–æ–∑–¥–∞—Ç –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞.

–ö–æ–º–º–∏—Ç: **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Django**

–ü–æ–ª—É—á–∞–µ–º Django —Ä–∞–∫–µ—Ç—É!
**–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞**

```bash
python manage.py runserver
```

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Django (Url -> View -> Template)

1. –°–æ–∑–¥–∞–µ–º –ø–µ—Ä–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** - —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–Ω–µ—Å–µ–Ω –≤ –æ–±–æ—Å–æ–±–ª–µ–Ω–Ω—É—é —á–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞. –ò–º–µ–µ—Ç —Å–≤–æ—é –ª–æ–≥–∏–∫—É, —Å–≤–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ —Å–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª.

```bash
python manage.py startapp blog_app
```

–ö–æ–º–º–∏—Ç: **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è blog_app**

2. –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç
–í –°–ê–ú–û–ú –ù–ò–ó–£ –ü–û–°–õ–ï –í–°–ï–• –°–õ–£–ñ–ï–ë–ù–´–• –ü–†–ò–õ–û–ñ–ï–ù–ò–ô

```python
INSTALLED_APPS = [
    'django.contrib.admin',
    ...
    'blog_app',

```

3. C–æ–∑–¥–∞–µ–º –ø–µ—Ä–≤–æ–µ `view` - `index` –≤ —Ñ–∞–π–ª–µ `views.py`

```python
from django.shortcuts import render, HttpResponse

# Index - —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å HttpResponse —Å —Ç–µ–∫—Å—Ç–æ–º "–ü—Ä–∏–≤–µ—Ç –∏–∑ Django!"
def index(request):
    return HttpResponse("–ü—Ä–∏–≤–µ—Ç –∏–∑ Django!")
```

4. –ü—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º –º–∞—Ä—à—Ä—É—Ç—ã –≤ —Ñ–∞–π–ª–µ `urls.py`

```python
from blog_app.views import index

urlpatterns = [
    path('admin/', admin.site.urls),
    # path('', views.index),
    path('', index),
]
```

–ö–æ–º–º–∏—Ç: **–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ view**

## –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –®–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä–æ–º Django

1. –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫—É `templates` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `blog_app`
2. –†–∞–∑–º–µ—â–∞–µ–º –≤ –Ω–µ–π —Ñ–∞–π–ª `index.html` (–ü—Ä–æ—Å—Ç–æ–π HTML-—Ñ–∞–π–ª —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º 1 —É—Ä–æ–≤–Ω—è)
3. –ò–∑–º–µ–Ω—è–µ–º `views.py`. –ò—Å–ø–æ–ª—å–∑—É—è —Ñ—É–Ω–∫—Ü–∏—é `render` –∏–∑ `django.shortcuts` –ø–µ—Ä–µ–¥–∞—ë–º –≤ –Ω–µ—ë `request` –∏ `index.html`

```python
from django.shortcuts import render


def index(request):
    return render(request, 'index.html')

```

–ö–æ–º–º–∏—Ç: **–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞**

### –ü–µ—Ä–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —à–∞–±–ª–æ–Ω–∞

–î–æ–±–∞–≤–∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `{{name}} –≤ index.html`
–î–æ–±–∞–≤–∏–ª–∏ –ø–µ—Ä–µ–¥–∞—á—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ —à–∞–±–ª–æ–Ω

```python
def index(request):
    context = {'name': 'Zigmund'}
    return render(request, 'index.html', context=context)
```

–ö–æ–º–º–∏—Ç: **–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —à–∞–±–ª–æ–Ω–∞**

### –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ —à–∞–±–ª–æ–Ω

–ú—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç —à–∞–±–ª–æ–Ω–∞ –ª—é–±–æ–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ JSON.

- –°—Ç—Ä–æ–∫–∏
- –ß–∏—Å–ª–∞
- –°–ø–∏—Å–∫–∏
- –°–ª–æ–≤–∞—Ä–∏
- –û–±—ä–µ–∫—Ç—ã
- –í—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤
- –û–±—Ä–∞—â–µ–Ω–∏—è –ø–æ –∫–ª—é—á—É –∏–ª–∏ –∏–Ω–¥–µ–∫—Å—É –∫ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º

## –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –∫–æ–Ω—Ü–µ–ø—Ü–∏–µ–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–æ–≤ –≤ Django

`–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä` –≤ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ Django - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç.

–ù–∞–ø—Ä–∏–º–µ—Ä –º—ã –º–æ–∂–µ–º –∏–∑ –º–∞—Ä—à—Ä—É—Ç–∞ –ø–æ–ª—É—á–∏—Ç—å id –ø–æ—Å—Ç–∞ –∏–ª–∏ slug –µ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ—Ä–∞—è –ø–æ–∏—â–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ë–î –∏ –≤–µ—Ä–Ω–µ—Ç –æ—Ç–≤–µ—Ç.

**–¢–∏–ø—ã –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–æ–≤ –≤ Django**

- `<int:pk>` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ (–ø—Ä–∏–º–µ—Ä:: /posts/1/)
- `<slug:slug>` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, –¥–µ—Ñ–∏—Å—ã –∏ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "my-slug-123")
- `<str:name>` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±—ã–µ –Ω–µ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ (–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ `/`) (–ø—Ä–∏–º–µ—Ä: `http://127.0.0.1:8000/blog/`)
- `<uuid:uuid>` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ UUID (–ø—Ä–∏–º–µ—Ä: 123e4567-e89b-12d3-a456-426655440000)
- `<path:subpath>` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–µ—à–∏ (—Ç–æ –µ—Å—Ç—å –ª—é–±—ã–µ —Å–∏–º–≤–æ–ª—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ URL) (–ø—Ä–∏–º–µ—Ä: /path/to/resource)

–î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–æ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:

```python
from django.urls import path

urlpatterns = [
    path('posts/<int:pk>/', views.post_detail, name='post_detail'),        # –ú–∞—Ä—à—Ä—É—Ç —Å —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –ø–æ—Å—Ç–∞
    path('posts/<slug:slug>/', views.post_by_slug, name='post_by_slug'),   # –ú–∞—Ä—à—Ä—É—Ç —Å slug –∑–∞–≥–æ–ª–æ–≤–∫–∞ –ø–æ—Å—Ç–∞
]
```

### –ß—Ç–æ —Ç–∞–∫–æ–µ `slug`?

`Slug` - —ç—Ç–æ –∫–æ—Ä–æ—Ç–∫–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ URL. –û–Ω –æ–±—ã—á–Ω–æ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –±—É–∫–≤, —Ü–∏—Ñ—Ä –∏ –¥–µ—Ñ–∏—Å–æ–≤ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ URL.

–ï–≥–æ –æ—á–µ–Ω—å –ª—é–±—è—Ç –ø–æ–∏—Å–∫–æ–≤–∏–∫–∏, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –ø–æ–º–æ–≥–∞–µ—Ç –∏–º –ø–æ–Ω—è—Ç—å, —á—Ç–æ –∑–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ –¥–∞–Ω–Ω–æ–º—É URL.

`–ü–∏—Ä–æ–∂–∫–∏ —Å –º—è—Å–æ–º –∏ –∫–∞—Ä—Ç–æ—à–∫–æ–π` -> `pirozhki-s-myasom-i-kartoshkoi`

`234` -> `234` - –ü–æ–∏—Å–∫–æ–≤—ã–π —Ä–æ–±–æ—Ç –Ω–µ –ø–æ–π–º–µ—Ç, —á—Ç–æ —ç—Ç–æ –∑–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞.

### –ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã `View`?

```python
from django.shortcuts import render

def post_detail(request, slug):

    # –ò—â–µ–º –ø–æ—Å—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ slug
    pass
```

### –°–æ–∑–¥–∞–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ

```python
def post_by_slug(request, post_slug):
    return HttpResponse(f'–ü–æ—Å—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º {post_slug}')

# –ú–∞—Ä—à—Ä—É—Ç
path('post/<slug:post_slug>', post_by_slug),
```

### –°–æ–∑–¥–∞–ª–∏ `dataset` –∏ –ø–æ–ª–æ–∂–∏–ª–∏ –µ–≥–æ –≤ —Ñ–∞–π–ª `dataset.py`

–§–æ—Ä–º–∞—Ç

```python
    {
        "title": "–ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ Python 3.10?",
        "slug": "chto-novogo-v-python-310",
        "post": "–í –≤–µ—Ä—Å–∏–∏ Python 3.10 –ø–æ—è–≤–∏–ª–æ—Å—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —É–ª—É—á—à–µ–Ω–∏–π –∏ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π. –ù–∞–ø—Ä–∏–º–µ—Ä, —É–ª—É—á—à–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å –æ–±—Ä–∞–∑—Ü–æ–º.",
        "hashtags": ["python", "–Ω–æ–≤–æ—Å—Ç–∏", "–≤—ã–ø—É—Å–∫"],
        "is_published": True,
        "views": 5832,
        "likes": 142,
        "comments": [
            {"username": "alex_dev", "text": "–û—Ç–ª–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ!"},
            {"username": "pythonista", "text": "–≠—Ç–∏ –Ω–æ–≤–æ–≤–≤–µ–¥–µ–Ω–∏—è —Å–∏–ª—å–Ω–æ —É—Å–∫–æ—Ä—è—Ç —Ä–∞–±–æ—Ç—É."}
        ]
    },
....
```

–ö–æ–º–º–∏—Ç: **–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏ –¥–∞—Ç–∞—Å–µ—Ç–∞**

### –°–¥–µ–ª–∞–ª–∏ –ø–æ–∏—Å–∫ –ø–æ –Ω–∞—à–µ–π "–±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö" –ø–æ Slug –∏ –æ—Ç–¥–∞—á—É –≤ —à–∞–±–ª–æ–Ω

–®–∞–±–ª–æ–Ω:

```html
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ title }}</title>
  </head>
  <body>
    <h1>{{title}}</h1>
    <p>–¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞: {{post}}</p>
    <p>–¢–µ–≥–∏: {{hashtags}}</p>
    <p>–ü—Ä–æ—Å–º–æ—Ç—Ä—ã: {{views}}</p>
    <p>–õ–∞–π–∫–∏: {{likes}}</p>
  </body>
</html>
```

–í—å—é:

```python
def post_by_slug(request, post_slug):
    # –ü—Ä–æ—Ö–æ–¥–∏–º —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π dataset –∏ –∏—â–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ —Å–ª–∞–≥—É
    post = [post for post in dataset if post['slug'] == post_slug]
    if not post:
        # 404 - –ü–æ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
        return HttpResponse('404 - –ü–æ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω', status=404)
    else:
        return render(request, 'post_detail.html', context=post[0], status=200)
```

–ö–æ–º–º–∏—Ç: **–ü–æ–∏—Å–∫ –ø–æ —Å–ª–∞–≥—É –≤ dataset –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –≤ —à–∞–±–ª–æ–Ω**

### –í—ã–Ω–µ—Å–ª–∏ `urls.py` –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ `blog_app`

1. –°–æ–∑–¥–∞–ª–∏ —Ñ–∞–π–ª `urls.py` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `blog_app` - –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç –º–∞—Ä—à—Ä—É—Ç—ã –∏–º–µ–Ω–Ω–æ —ç—Ç–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```python
urlpatterns = [
    path('post/<slug:post_slug>', post_by_slug),
    path('', index),
]
```

2. –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º –ø–∞–∫–µ—Ç–µ –≤ `urls.py` –ø–æ–¥–∫–ª—é—á–∏–ª–∏ —Ñ–∞–π–ª `urls.py` –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è `blog_app` —Ñ—É–Ω–∫—Ü–∏–µ–π `include`

–ü—Ä–∏ —ç—Ç–æ–º –¥–∞–ª–∏ –ø—Ä–µ—Ñ–∏–∫—Å `''` - –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–µ. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –∏–∑ `urls.py` –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ `blog_app` –±—É–¥—É—Ç –≤ –∫–æ—Ä–Ω–µ —Å–∞–π—Ç–∞

```python
path('', include('blog_app.urls')),
```

–ö–æ–º–º–∏—Ç: **–í—ã–Ω–µ—Å–µ–Ω–∏–µ urls.py –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª**

### –ê—Ä–≥—É–º–µ–Ω—Ç `name` –≤ –º–∞—Ä—à—Ä—É—Ç–µ

`name` - —ç—Ç–æ –∏–º—è –º–∞—Ä—à—Ä—É—Ç–∞, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –º–∞—Ä—à—Ä—É—Ç –∏–∑ –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –≠—Ç–æ —É–¥–æ–±–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –º–∞—Ä—à—Ä—É—Ç –º–æ–∂–µ—Ç –ø–æ–º–µ–Ω—è—Ç—Å—è, –Ω–æ –µ—Å–ª–∏ –ø—Å–µ–≤–¥–æ–Ω–∏–º –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º, —Ç–æ —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–µ—Ç—Å—è.

–ü–æ–¥–∫–ª—é—á–∏–ª–∏ –º–∞—Ä—à—Ä—É—Ç —Å –ø—Å–µ–≤–¥–æ–Ω–∏–º–æ–º

```python
path('post/<slug:post_slug>', post_by_slug, name='post_by_slug'),
```

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏ –≤ —à–∞–±–ª–æ–Ω–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ —á–µ—Ä–µ–∑ —à–∞–±–ª–æ–Ω–Ω—ã–π —Ç–µ–≥
`url`

## –†–∞–±–æ—Ç–∞ —Å `Django Templates`

```html
 {% for post in posts %}
    <hr>
    <p>Title: {{ post.title }}</p>
    <p>Slug: {{ post.slug }}</p>
    {% comment %} –ó–∞—Ö–∞—Ä–¥–∫–æ–¥–∏–ª–∏ —Å—Å—ã–ª–∫—É. –ï—Å–ª–∏ –º–∞—Ä—à—Ä—É—Ç –ø–æ–º–µ–Ω—è—Ç—Å—è –Ω–∞–¥–æ –±—É–¥–µ—Ç –≤–µ–∑–¥–µ –ø—Ä–∞–≤–∏—Ç—å —Ä—É–∫–∞–º–∏ {% endcomment %}
    <a href="post/{{ post.slug }}">{{ post.title }}</a>

    {% comment %} –ß—Ç–æ–±—ã —Å—Å—ã–ª–∫—É –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å, –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Å–µ–≤–¥–æ–Ω–∏–º—ã
    –º–∞—Ä—à—Ä—É—Ç–æ–≤ {% endcomment %}
    <p>–°—Å—ã–ª–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ —Ç–µ–≥–∞ <code>url</code>:</p>
    <a href = {% url 'post_by_slug' post.slug %}>{{ post.title }}</a>
    <hr>
    {% endfor %}
```

### –ü–æ–¥–ø–∞–ø–∫–∏ –≤ `templates`

–≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤ –≤ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.
–ü–æ—Ç–æ–º—É —á—Ç–æ —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä –±–µ—Ä–µ—Ç –ø–µ—Ä–≤–æ–µ –ø–æ–ø–∞–≤—à–µ–µ—Å—è —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ.

–ö–æ–º–º–∏—Ç: **–ü–æ–¥–ø–∞–ø–∫–∏ –≤ templates –ø–µ—Ä–≤—ã–π —Ü–∏–∫–ª —à–∞–±–ª–æ–Ω–∞ –∏ —Ç–µ–≥ url**

### –¢–µ–≥–∏ —à–∞–±–ª–æ–Ω–æ–≤

- `{% cooment %}` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- `{% endcomment %}` - –∫–æ–Ω–µ—Ü –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
- `{% for %}` - —Ü–∏–∫–ª
- `{% endfor %}` - –∫–æ–Ω–µ—Ü —Ü–∏–∫–ª–∞
- `{% if %}` - —É—Å–ª–æ–≤–∏–µ
- `{% elif %}` - —É—Å–ª–æ–≤–∏–µ
- `{% else %}` - —É—Å–ª–æ–≤–∏–µ
- `{% endif %}` - –∫–æ–Ω–µ—Ü —É—Å–ª–æ–≤–∏—è
- `{% url %}` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –º–∞—Ä—à—Ä—É—Ç –ø–æ –ø—Å–µ–≤–æ–¥–æ–Ω–∏–º—É

### `If` –∏ `For` –≤ —à–∞–±–ª–æ–Ω–∞—Ö Django

–í –æ–±—â–∏–π –∫–∞—Ç–∞–ª–æ–≥ –ø–æ—Å—Ç–æ–≤ –¥–æ–±–∞–≤–∏–ª–∏ —Ü–∏–∫–ª –∏ —É—Å–ª–æ–≤–∏–µ. –ü–æ–ø—Ä–æ–±–æ–≤–∞–ª–∏ –≤—ã–≤–æ–¥–∏—Ç—å –ø–æ—Å—Ç—ã
—Ç–æ–ª—å–∫–æ —Å `is_published=True` –∞ —Ç–∞–∫ –∂–µ —Å–¥–µ–ª–∞–ª–∏ —Ä–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –∏ –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è –ø–æ—Å—Ç–æ–≤ —Å `is_published=True` –∏ `is_published=False`

–ö–æ–º–º–∏—Ç: **–í—Ç–æ—Ä–æ–π —Ü–∏–∫–ª —à–∞–±–ª–æ–Ω–∞ –∏ —É—Å–ª–æ–≤–∏—è –≤ —à–∞–±–ª–æ–Ω–∞—Ö**

### –¶–∏–∫–ª –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞

–í–ª–æ–∂–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –≤—ã–≤–µ–ª–∏ —Å–ø–∏—Å–æ–∫ —Ö–µ—à—Ç–µ–≥–æ–≤ –¥–ª—è –ø–æ—Å—Ç–∞
–ò –∑–∞–¥–∞–ª–∏ –∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è

–ö–æ–º–º–∏—Ç: **–í–ª–æ–∂–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –≤ —à–∞–±–ª–æ–Ω–∞—Ö**

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏

1. –ù–∞–¥–æ –æ—Ñ–æ—Ä–º–∏—Ç—å 2 –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ `settings.py`

```python
STATIC_URL = '/static/'
STATICFILES_DIRS = [
    BASE_DIR / 'static'
```

2. –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `static` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
3. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏–∫—É –≤ –Ω—É–∂–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã `{% load static %}`
4. –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –Ω—É–∂–Ω–æ–º—É —Ñ–∞–π–ª—É –¥–æ–ø—É—Å—Ç–∏–º —Ç–∞–∫ `<link rel="stylesheet" href="{% static "css/main.css" %}" />`

–ö–æ–º–º–∏—Ç: **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏**

## Lesson 48 –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å Django ORM

1. –ü—Ä–∏–º–µ–Ω–∏–º —Å–ª—É–∂–µ–±–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ Django. –¢–µ–ø–µ—Ä—å –µ—Å–ª–∏ –∑–∞–π—Ç–∏ –≤ –ë–î –º—ã —É–≤–∏–¥–∏–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–Ω–æ–≥–æ —Ç–∞–±–ª–∏—Ü.

```bush
python manage.py migrate
```

2. –°–æ–∑–¥–∞–¥–∏–º —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –≠—Ç–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –ø—Ä–∞–≤ –Ω–∞ –ª—é–±—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

–¢–µ–ø–µ—Ä—å, –µ—Å–ª–∏ –∑–∞–≥–ª—è–Ω—É—Ç—å –≤ –ë–î, –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –≤ —Ç–∞–±–ª–∏—Ü–µ `auth_user` –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```bush
python manage.py createsuperuser
```

3. C–æ–∑–¥–∞–¥–∏–º –º–æ–¥–µ–ª—å `Post`

```python
class Post(models.Model):
    title = models.CharField(max_length=200)
    text = models.TextField()
    slug = models.SlugField(unique=True)
    tags = models.JSONField(null=True, blank=True, default=list)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

```

–í—ã–ø–æ–ª–Ω–∏–º –º–∏–≥—Ä–∞—Ü–∏–∏

```bush
python manage.py makemigrations
python manage.py migrate
```

–ö–æ–º–º–∏—Ç: **–°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ Post**

### Django Shell Plus

```bush
pip install django-extensions
```

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ `settings.py`

```python
INSTALLED_APPS = [
    ...
    'django_extensions',
```

`shell_plus` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –º–æ–¥–µ–ª–∏ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏. –ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å `shell_plus`, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É:

```bash
python manage.py shell_plus
```

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤–∏–¥–µ—Ç—å SQL-–∑–∞–ø—Ä–æ—Å—ã, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –≤–∞—à–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ —Å –º–æ–¥–µ–ª—è–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥ `--print-sql`:

```bash
python manage.py shell_plus --print-sql
```

### –ü–µ—Ä–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã

–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞, –Ω–∞–º –Ω–∞–¥–æ –æ–±—Ä–∞—Ç–∏—Ç—Å—è –∫ –º–æ–¥–µ–ª–∏ –ø–æ –∏–º–µ–Ω–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä `User`, –ø–æ—Å–ª–µ —á–µ–≥–æ –æ–±—Ä–∞—Ç–∏—Ç—Å—è –∫ –æ–±—ä–µ–∫—Ç–Ω–æ–º—É –º–µ–Ω–µ–¥–∂–µ—Ä—É `objects` –∏ –≤—ã–∑–≤–∞—Ç—å –Ω—É–∂–Ω—ã–π –º–µ—Ç–æ–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä `all()`

`User.objects.all()`

–ó–∞–ø—Ä–æ—Å –≤–µ—Ä–Ω–µ—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç `QuerySet`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–ø–∏—Å–æ–∫, –∞ –Ω–∞–±–æ—Ä –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥—Ä—É–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.

–ö–æ–º–º–∏—Ç: **–ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å**

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤

```python
   post1 = Post.objects.create(
       title='–í–≤–µ–¥–µ–Ω–∏–µ –≤ Python',
       text='Python ‚Äî —ç—Ç–æ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è...',
       slug='vvedenie-v-python',
       tags= ['–æ—Å–Ω–æ–≤—ã', '—Å–∏–Ω—Ç–∞–∫—Å–∏—Å', '—Å–æ–≤–µ—Ç—ã']
   )

post2 = Post.objects.create(
       title='–í–≤–µ–¥–µ–Ω–∏–µ –≤ Django',
       text='Django ‚Äî —ç—Ç–æ –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ —è–∑—ã–∫–µ Python...',
       slug='vvedenie-v-django',
       tags= ['django', '–≤–µ–±', '—Ñ–µ–π–º–≤–æ—Ä–∫']
   )

```

–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥–æ—Å—Ç–∞—Ç—å –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ø–æ—Å—Ç –¥–∞–Ω–Ω—ã–µ

```python
post1.title
post1.text
post1.slug
post1.tags
```

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ (–≠–∫–∑–µ–º–ø–ª—è—Ä –º–æ–¥–µ–ª–∏ + Save)

```python
post3 = Post(
       title='–í–≤–µ–¥–µ–Ω–∏–µ –≤ SQL',
       text='SQL ‚Äî —ç—Ç–æ —è–∑—ã–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö...',
       slug='vvedenie-v-sql',
       tags= ['sql', '–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö']

)

post3.save()
```

–ö–æ–º–º–∏—Ç: **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤**

### Read Update Delete

–î–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ—Å—Ç–æ–≤ –ø–æ `slug` –∏–ª–∏ `id` –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ `get`

```python
get_post_1 = Post.objects.get(id = 1)
get_post_1 = Post.objects.get(pk = 1) # Primary Key
```

–û–±–Ω–æ–≤–∏–º slug

```python
get_post_1.slug = "vvedenie_v_yazik_python"
get_post_1.save()
```

–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤

```python
Post.objects.get(id=1).delete()
get_post_1.delete()
```

–ö–æ–º–º–∏—Ç: **–ü–æ—Å—Ç—ã: Read Update Delete**

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —ç—Ç–æ–π –º–æ–¥–µ–ª–∏ –≤ –∞–¥–º–∏–Ω–∫—É

–£ –Ω–∞—Å –µ—Å—Ç—å 2 —Å–ø–æ—Å–æ–±–∞ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å. –ü—Ä–æ—Å—Ç–æ–π, –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É, –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ - –æ—Ç–ª–∏—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.

–í—Ç–æ—Ä–æ–π, —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∫–ª–∞—Å—Å–∞ –º–æ–¥–µ–ª–∏, —Å –ø–æ–º–æ—â—å—é –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ `admin.site.register(Post)`. –ö–æ—Ç–æ—Ä—ã–π –¥–∞—Å—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ –∞–¥–º–∏–Ω–∫–∏.

```python
admin.site.register(Post)

# @admin.register(Post)
# class PostAdmin(admin.ModelAdmin):
#     list_display = ('title', 'slug', 'created_at', 'updated_at')
#     search_fields = ('title', 'text')
#     prepopulated_fields = {'slug': ('title',)}

```

–ö–æ–º–º–∏—Ç: **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ Post –≤ –∞–¥–º–∏–Ω–∫—É**

## Lesson 49. Django ORM. –†–∞–±–æ—Ç–∞ —Å–æ —Å–≤—è–∑—å—é –æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º

–î–æ–±–∞–≤–∏–ª–∏ —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –º–æ–¥–µ–ª–∏ –ø–æ—Å—Ç–æ–≤.

```python
class Post(models.Model):
    title = models.CharField(max_length=300, unique=True, verbose_name='–ó–∞–≥–æ–ª–æ–≤–æ–∫')
    text = models.TextField(verbose_name='–¢–µ–∫—Å—Ç')
    slug = models.SlugField(unique=True, verbose_name='–ê–¥—Ä–µ—Å —Å—Ç—Ä–∞–Ω–∏—Ü—ã')
    author = models.ForeignKey(get_user_model(), on_delete=models.CASCADE, verbose_name='–ê–≤—Ç–æ—Ä')
    tags = models.JSONField(null=True, blank=True, default=list, verbose_name='–¢–µ–≥–∏')
    created_at = models.DateTimeField(auto_now_add=True, verbose_name='–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è')
    updated_at = models.DateTimeField(auto_now=True, verbose_name='–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è')
    views = models.IntegerField(default=0, verbose_name='–ü—Ä–æ—Å–º–æ—Ç—Ä—ã')

    def __str__(self):
        return str(self.title)
    
    def get_absolute_url(self):
        return reverse("post_by_slug", args=[str(self.slug)])
        # return f"blog/{self.slug}/view/ # –≠—Ç–æ 2-–π –≤–∞—Ä–∏–∞–Ω—Ç —Ä–∞–±–æ—Ç—ã —Å –∞–¥—Ä–µ—Å–∞–º–∏ –≤ Django

    
    class Meta:
        verbose_name = "–ü–æ—Å—Ç"
        verbose_name_plural = "–ü–æ—Å—Ç—ã"

```

### –î–æ—Å—Ç–∞—Ç—å username –∏–∑ –ø–æ—Å—Ç–∞

```python
post = Post.objects.get(pk=1)
author_name = post.author.username

author_name_post_1 = Post.objects.get(pk=1).author.username

# –î–æ–±—ã–≤–∞–µ–º –≤—Å–µ –ø–æ—Å—Ç—ã —é–∑–µ—Ä–Ω–µ–π–º admin
user_admin_all_posts = User.objects.get(username='admin').posts.all()

# –ó–∞–ø—É—Å–∫ shell plus
python manage.py shellplus
```

## –ü–∞—Ä–∞–º–µ—Ç—Ä `related_name` –≤ Django ORM

–ü–∞—Ä–∞–º–µ—Ç—Ä `related_name` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–æ–ª—è—Ö ForeignKey –∏ ManyToManyField –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–º–µ–Ω–∏ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –æ—Ç —Å–≤—è–∑–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ –æ–±—Ä–∞—Ç–Ω–æ –∫ —ç—Ç–æ–π.

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```python
class Post(models.Model):
    author = models.ForeignKey(User, on_delete=models.CASCADE, related_name='posts')
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
–£–¥–æ–±–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–≤—è–∑–∞–Ω–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º:

–ë–µ–∑ related_name: User.objects.get(id=1).post_set.all()
–° related_name: User.objects.get(id=1).posts.all()

- –ò–∑–±–µ–∂–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏–º–µ–Ω –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–≤—è–∑—è—Ö —Å –æ–¥–Ω–æ–π –º–æ–¥–µ–ª—å—é.

–£–ª—É—á—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∫–æ–¥–∞.

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è—Ö –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏—è—Ö.

related_name –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –æ–±—Ä–∞—Ç–Ω—ã–º–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏ –≤ Django ORM, –¥–µ–ª–∞—è –∫–æ–¥ –±–æ–ª–µ–µ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–º –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º.

## Lesson 52. Django ORM. Lookups. –†–∞–±–æ—Ç–∞ —Å–æ —Å–≤—è–∑—å—é –º–Ω–æ–≥–∏–µ –∫–æ –º–Ω–æ–≥–∏–º

### –ù–∞—à–∏ –º–æ–¥–µ–ª–∏ –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç

```python

class Post(models.Model):
    STATUS_CHOICES = (
        ("published", "–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ"),
        ("draft", "–ß–µ—Ä–Ω–æ–≤–∏–∫"),
    )
    
    title = models.CharField(max_length=300, unique=True, verbose_name="–ó–∞–≥–æ–ª–æ–≤–æ–∫")
    text = models.TextField(verbose_name="–¢–µ–∫—Å—Ç")
    slug = models.SlugField(unique=True, verbose_name="–ê–¥—Ä–µ—Å —Å—Ç—Ä–∞–Ω–∏—Ü—ã")
    author = models.ForeignKey(
        get_user_model(),
        related_name="posts",
        on_delete=models.CASCADE,
        verbose_name="–ê–≤—Ç–æ—Ä",
    )
    category = models.ForeignKey(
        "Category",
        related_name="posts",
        null=True,
        default=None,
        on_delete=models.CASCADE,
    )
    # –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
    tags = models.ManyToManyField(
        "Tag", related_name="posts", blank=True, verbose_name="–¢–µ–≥–∏"
    )
    created_at = models.DateTimeField(auto_now_add=True, verbose_name="–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è")
    updated_at = models.DateTimeField(auto_now=True, verbose_name="–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è")
    views = models.IntegerField(default=0, verbose_name="–ü—Ä–æ—Å–º–æ—Ç—Ä—ã")
    cover_image = models.ImageField(blank=True, null=True, verbose_name="–û–±–ª–æ–∂–∫–∞", upload_to="media/images/")
   
    status = models.CharField(
            max_length=12, choices=STATUS_CHOICES, default="draft", verbose_name="–°—Ç–∞—Ç—É—Å"
        )

    def __str__(self):
        return str(self.title)

    def get_absolute_url(self):
        return reverse("post_by_slug", args=[str(self.slug)])
        # return f"blog/{self.slug}/view/ # –≠—Ç–æ 2-–π –≤–∞—Ä–∏–∞–Ω—Ç —Ä–∞–±–æ—Ç—ã —Å –∞–¥—Ä–µ—Å–∞–º–∏ –≤ Django

    def save(self, *args, **kwargs):
        """
        –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ save –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ slug
        """
        slug = slugify(unidecode(self.title))
        self.slug = slug
        super().save(*args, **kwargs)

    class Meta:
        verbose_name = "–ü–æ—Å—Ç"
        verbose_name_plural = "–ü–æ—Å—Ç—ã"


class Category(models.Model):
    name = models.CharField(max_length=200, unique=True)
    slug = models.SlugField(unique=True)

    def __str__(self):
        return str(self.name)

    
    def get_absolute_url(self):
        return reverse("posts_by_category", args=[str(self.slug)])

    def save(self, *args, **kwargs):
        """
        –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ save –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ slug
        """
        slug = slugify(unidecode(self.name))
        self.slug = slug
        super().save(*args, **kwargs)


class Tag(models.Model):
    name = models.CharField(max_length=100, unique=True)
    slug = models.SlugField(unique=True)

    def save(self, *args, **kwargs):
        self.name = self.name.lower().replace(" ", "_")
        slug = slugify(unidecode(self.name))
        self.slug = slug
        super().save(*args, **kwargs)

    def __str__(self):
        return f"#{self.name}"

    def get_absolute_url(self):
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç posts_by_tag
        """
        url = reverse("posts_by_tag", args=[str(self.slug)])
        return url


class Comment(models.Model):

    STATUS_CHOICES = (
        ("unchecked", "–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω"),
        ("accepted", "–ü—Ä–æ–≤–µ—Ä–µ–Ω"),
        ("rejected", "–û—Ç–∫–ª–æ–Ω–µ–Ω"),
    )

    text = models.TextField(verbose_name="–¢–µ–∫—Å—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è", max_length=2000)
    status = models.CharField(
        max_length=12, choices=STATUS_CHOICES, default="unchecked"
    )

    author = models.ForeignKey(
        get_user_model(), on_delete=models.CASCADE, verbose_name="–ê–≤—Ç–æ—Ä"
    )

    post = models.ForeignKey(Post, on_delete=models.CASCADE, verbose_name="–ü–æ—Å—Ç")

    created_at = models.DateTimeField(auto_now_add=True, verbose_name="–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è")
    updated_at = models.DateTimeField(auto_now=True, verbose_name="–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è")

```

### Lookups - –ª—É–∫–∞–ø—ã.

```python
# –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É –ø–æ—Å—Ç–∞ (—Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π)
posts = Post.objects.filter(text__icontains=search_text)

# –ü–æ–∏—Å–∫ –ø–æ—Å—Ç–æ–≤ –ø–æ –∏–º–µ–Ω–∏ —Ç–µ–≥–∞ (—á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–º—É)
posts = Post.objects.filter(tags__name__iexact=tag_name)

# –≠—Ç–æ –∂–µ, –Ω–æ —á–µ—Ä–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–≥–∞
posts = Tag.objects.get(name=tag_name).posts.all()

# –ü–æ–∏—Å–∫ –ø–æ—Å—Ç–æ–≤ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ 5
posts = Post.objects.filter(views__lte=5)

# –ü–æ—Å—Ç—ã, —Å –≤—Ö–æ–∂–¥–µ–Ω–∏–µ–º –≤ –∏–º—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¢–µ—Ö–Ω–æ–ª–æ–≥ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ 5+
posts = Post.objects.filter(category__name__icontains="–¢–µ—Ö–Ω–æ–ª–æ–≥").filter(views__gte=5)
```

### –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ shell plus
python manage.py shell_plus

### –ö–æ–º–∞–Ω–¥–∞ —Å –≤—ã–≤–æ–¥–æ–º SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª—å
python manage.py shell_plus --print-sql

## Lesson 53 F –∏ Q –æ–±—ä–µ–∫—Ç—ã

–ö–æ–Ω–µ—á–Ω–æ! –° —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º —Ä–∞—Å—Å–∫–∞–∂—É –æ F –æ–±—ä–µ–∫—Ç–∞—Ö –≤ Django –∏ –∫–æ–ª–ª–∏–∑–∏—è—Ö –∑–∞–ø–∏—Å–∏ –ø—Ä–∏ –ø–∏–∫–æ–≤—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è—Ö –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –ø–æ—Å—Ç–æ–≤.

F –æ–±—ä–µ–∫—Ç—ã –≤ Django - —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—è–º–∏ –º–æ–¥–µ–ª–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–ª—è–º–∏, –Ω–µ –∑–∞–≥—Ä—É–∂–∞—è –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç—å Python. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

–ù–∞ –ø—Ä–∏–º–µ—Ä–µ –ø–æ–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –¥–ª—è –ø–æ—Å—Ç–æ–≤, F –æ–±—ä–µ–∫—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –µ–≥–æ –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –æ–±—Ä–∞—Ç–Ω–æ, –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å F –æ–±—ä–µ–∫—Ç –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

–û–¥–Ω–∞–∫–æ –ø—Ä–∏ –ø–∏–∫–æ–≤—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è—Ö, –∫–æ–≥–¥–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç –ø–æ—Å—Ç, –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –∫–æ–ª–ª–∏–∑–∏–∏ –∑–∞–ø–∏—Å–∏. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø—ã—Ç–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –ø–æ–ª–µ.

F –æ–±—ä–µ–∫—Ç—ã –ø–æ–º–æ–≥–∞—é—Ç –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∏—Å–∫ —Ç–∞–∫–∏—Ö –∫–æ–ª–ª–∏–∑–∏–π, —Ç–∞–∫ –∫–∞–∫ –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –ø—Ä–∏ –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ –≤—Å–µ –µ—â–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –¥–≤–∞ –∑–∞–ø—Ä–æ—Å–∞ –ø—ã—Ç–∞—é—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

–î–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Å–Ω–∏–∂–µ–Ω–∏—è —Ä–∏—Å–∫–∞ –∫–æ–ª–ª–∏–∑–∏–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏, —Ç–∞–∫–∏–µ –∫–∞–∫:

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —É—Ä–æ–≤–Ω–µ–º –∏–∑–æ–ª—è—Ü–∏–∏.
–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.
–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥–µ–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ.
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, F –æ–±—ä–µ–∫—Ç—ã –≤ Django –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—è–º–∏ –º–æ–¥–µ–ª–∏, –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–∞—è —Ä–∏—Å–∫ –∫–æ–ª–ª–∏–∑–∏–π –ø—Ä–∏ –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö, –Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –º–æ–≥—É—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä—ã.

### –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –≤ –ø–æ—Å—Ç–µ

```python
def post_by_slug(request, post_slug) -> HttpResponse:
    """
    –ü—Ä–æ—Ö–æ–¥–∏–º —Å–ª–æ–≤–∞—Ä–µ–º –∏ –∏—â–µ–º –∑–∞–ø–∏—Å—å –ø–æ —Å–ª–∞–≥—É.
    –ï—Å–ª–∏ –ø–æ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º 404, –∏–Ω–∞—á–µ –≤—ã–≤–æ–¥–∏–º –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤.
    """
    post = get_object_or_404(Post, slug=post_slug)

    # 1. –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø–æ—Å—Ç–∞ –Ω–∞ 1, –∏—Å–ø–æ–ª—å–∑—É—è F-–æ–±—ä–µ–∫—Ç
    Post.objects.filter(slug=post_slug).update(views=F('views') + 1)

    context = {
        "post": post,
        "menu": menu,
        "page_alias": "blog"
    }

    return render(request, 'blog_app/post_detail.html', context=context, status=200)
```

–í –Ω–∞—à–µ–º –∫–æ–¥–µ –º—ã –≤–∏–¥–∏–º —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É:

Post.objects.filter(slug=post_slug).update(views=F('views') + 1)

–ó–¥–µ—Å—å –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º F-–æ–±—ä–µ–∫—Ç –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è 'views' –Ω–∞ 1. –†–∞–∑–±–µ—Ä–µ–º —ç—Ç–æ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –ø–æ–¥—Ä–æ–±–Ω–µ–µ:

Post.objects - —ç—Ç–æ –º–µ–Ω–µ–¥–∂–µ—Ä –º–æ–¥–µ–ª–∏ Post, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

.filter(slug=post_slug) - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –∑–∞–ø–∏—Å–∏, –æ—Å—Ç–∞–≤–ª—è—è —Ç–æ–ª—å–∫–æ –ø–æ—Å—Ç —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º —Å–ª–∞–≥–æ–º.

.update() - –º–µ—Ç–æ–¥ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

views=F('views') + 1 - —ç—Ç–æ –∫–ª—é—á–µ–≤–∞—è —á–∞—Å—Ç—å, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è F-–æ–±—ä–µ–∫—Ç:

F('views') —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è 'views' –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
1 —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º —É–≤–µ–ª–∏—á–∏—Ç—å —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ 1.
–¢–∞–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç Django —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å SQL-–∑–∞–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω–∏—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–Ω–∞—á–∞–ª–∞ –∏–∑–≤–ª–µ–∫–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ, –∞ –∑–∞—Ç–µ–º –æ–±–Ω–æ–≤–ª—è—Ç—å –µ–≥–æ.

–≠—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–∏—Å–∫ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –¥–æ—Å—Ç—É–ø–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ –æ–¥–Ω–æ–º—É –ø–æ—Å—Ç—É.

#### –ü–æ—á–µ–º—É –ø–æ–ª–µ —Å—Ç—Ä–æ–∫–æ–π –≤ F?

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–≤—ã—á–µ–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ F-–æ–±—ä–µ–∫—Ç–∞ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–∂–Ω–æ–π —á–∞—Å—Ç—å—é —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Django.

–ú—ã –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –∏–º—è –ø–æ–ª—è –≤ –∫–∞–≤—ã—á–∫–∞—Ö –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ F-–æ–±—ä–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, F('views')) –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç Django –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É –∫–∞–∫ –∏–º—è –ø–æ–ª—è –º–æ–¥–µ–ª–∏.

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥–∏–±–∫–æ—Å—Ç—å - –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ Python –∏–ª–∏ Django.

–≠—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–±—â–µ–º—É —Å—Ç–∏–ª—é Django, –≥–¥–µ –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π —á–∞—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ QuerySet.values() –∏–ª–∏ –≤ ORM-–∑–∞–ø—Ä–æ—Å–∞—Ö).

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç Django –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ ORM.

–≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º –∏ —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –º—ã —Å—Å—ã–ª–∞–µ–º—Å—è –Ω–∞ –ø–æ–ª–µ –º–æ–¥–µ–ª–∏, –∞ –Ω–µ –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é Python.

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –≤ Django –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Å–µ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ, —á—Ç–æ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—é –ø–æ–Ω—è—Ç–Ω–æ–≥–æ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–≥–æ –∫–æ–¥–∞.

### Q –æ–±—ä–µ–∫—Ç

Q –æ–±—ä–µ–∫—Ç—ã –≤ Django –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–∑–≤–æ–ª—è—è –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –ò–õ–ò (OR), –ò (AND) –∏ –ù–ï (NOT). –≠—Ç–∏ –æ–±—ä–µ–∫—Ç—ã –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω—ã, –∫–æ–≥–¥–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã `.filter()` –∏ `.exclude()`, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ª–æ–≥–∏–∫—É –ò (AND), –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏.

**Q-–æ–±—ä–µ–∫—Ç—ã –≤ Django –Ω–µ —è–≤–ª—è—é—Ç—Å—è –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–µ–∑–∞–º–µ–Ω–∏–º—ã–º–∏**, –Ω–æ –æ–Ω–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ —Ä–µ—á—å –∏–¥–µ—Ç –æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —É—Å–ª–æ–≤–∏–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —É—Å–ª–æ–≤–∏–π –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å—Ç—Ä–æ–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π ¬´–ò–õ–ò¬ª –∏ ¬´–ò –ù–ï¬ª, —á—Ç–æ —Ç—Ä—É–¥–Ω–æ –∏–ª–∏ –Ω–µ —Ç–∞–∫ —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ —Ä–µ–∞–ª–∏–∑—É–µ–º–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ QuerySet, —Ç–∞–∫–∏—Ö –∫–∞–∫ `.filter()` –∏ `.exclude()`, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ–µ–¥–∏–Ω—è—é—Ç —É—Å–ª–æ–≤–∏—è —á–µ—Ä–µ–∑ –ª–æ–≥–∏—á–µ—Å–∫–æ–µ "–ò".

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Q-–æ–±—ä–µ–∫—Ç–æ–≤ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—Å–æ–±–µ–Ω–Ω–æ —Ü–µ–Ω–Ω—ã–º, –∫–æ–≥–¥–∞ –≤–∞–º –Ω—É–∂–Ω–æ:
- –°–æ–µ–¥–∏–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ "–ò–õ–ò" –∏–ª–∏ "–ò –ù–ï".
- –ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
- –†–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –Ω–∞ –ª–µ—Ç—É.

–•–æ—Ç—è –º–Ω–æ–≥–∏–µ –∑–∞–¥–∞—á–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–µ—à–µ–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ–±—ã—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤ QuerySet, Q-–æ–±—ä–µ–∫—Ç—ã —É–ø—Ä–æ—â–∞—é—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –¥–µ–ª–∞—è –∫–æ–¥ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º –∏ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–º. –û–¥–Ω–∞–∫–æ —ç—Ç–æ –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –±–µ–∑ –Ω–∏—Ö –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏—Å—å. –í–æ –º–Ω–æ–≥–∏—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –µ—Å–ª–∏ –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –±–µ–∑ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ —É—Å–ª–æ–∂–Ω–µ–Ω–∏—è –∫–æ–¥–∞.

### –û–ø–µ—Ä–∞—Ç–æ—Ä—ã Q –æ–±—ä–µ–∫—Ç–æ–≤

- `|` (–ò–õ–ò / OR): –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —É—Å–ª–æ–≤–∏—è —Ç–∞–∫, —á—Ç–æ –æ–±—ä–µ–∫—Ç —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–º—É –∏–∑ —É—Å–ª–æ–≤–∏–π.
- `&` (–ò / AND): –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —É—Å–ª–æ–≤–∏–π, –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –¥–æ–ª–∂–µ–Ω —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—Ç—å –≤—Å–µ–º —É—Å–ª–æ–≤–∏—è–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
- `~` (–ù–ï / NOT): –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å–ª–æ–≤–∏—è, —Ç.–µ. –≤—ã–±–æ—Ä–∞ –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∫—Ä–∏—Ç–µ—Ä–∏—é.

### –ü—Ä–∞–≤–∏–ª–∞ –∏ –ø–æ—Ä—è–¥–æ–∫ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏

–ü—Ä–∏ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ Q –æ–±—ä–µ–∫—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é —ç—Ç–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –≤–∞–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫–æ–±–∫–∏ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —É—Å–ª–æ–≤–∏–π. –≠—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –≤–ª–∏—è—Ç—å –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞. –í –æ–±—â–µ–º —Å–ª—É—á–∞–µ, –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤ —Å–∫–æ–±–∫–∞—Ö –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏.

#### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –Ω–∞—à–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```bash
python manage.py shell-plus --print-sql
```

1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ–ø—É–±–ª–∏–æ–∫–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã
```python
published_posts = Post.objects.filter(status='published')
```

2. –ù–∞–π—Ç–∏ –ø–æ—Å—Ç—ã —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ —Å–ª–æ–≤–æ:
```python

posts_with_word = Post.objects.filter(title__icontains='Django')
```

3. –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–æ—Å—Ç—ã:
```python
popular_posts = Post.objects.filter(views__gt=100)
```

4. –ü–æ—Å—Ç—ã –≥–¥–µ –µ—Å—Ç—å —Ç–µ–≥ Python
<!-- TODO –í—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ —Ç–µ–≥? -->
```python
tag_name = 'python'
tagged_posts = Post.objects.filter(tags__name=tag_name)
```

5. –ü–æ –≥–æ–¥—É
```python
year = 2024
posts_from_year = Post.objects.filter(created_at__year=year)
```

6. –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç—ã —Å –∫–æ–º–º–µ–Ω—Ç–∞–º–∏:

```python
posts_with_comments = Post.objects.filter(comment__isnull=False).distinct()
```
7. –ü–æ—Å—Ç—ã —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Å–ª–æ–≤–æ–º –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∏–ª–∏ –≤ —Ç–µ–∫—Å—Ç–µ

```python
keyword = "Python"
posts_with_keyword = Post.objects.filter(Q(title__icontains=keyword) | Q(text__icontains=keyword))
```

#### –§–∏–Ω–∞–ª—å–Ω—ã–π –≤–∏–¥ –≤—å—é—à–∫–∏ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤–æ–π —Ñ–æ—Ä–º—ã

### –û—Å–Ω–æ–≤—ã Q-–æ–±—ä–µ–∫—Ç–æ–≤

Q-–æ–±—ä–µ–∫—Ç—ã –≤ Django –ø–æ–∑–≤–æ–ª—è—é—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤, —á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ –ø—Ä–∏ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Å–ª–æ–≤–∏–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

### –û–ø–µ—Ä–∞—Ç–æ—Ä |=

–í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Q-–æ–±—ä–µ–∫—Ç–æ–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä `|=` –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç "–ò–õ–ò —Ä–∞–≤–Ω–æ". –û–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–µ —É—Å–ª–æ–≤–∏–µ –∫ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É Q-–æ–±—ä–µ–∫—Ç—É, –æ–±—ä–µ–¥–∏–Ω—è—è –∏—Ö —Å –ø–æ–º–æ—â—å—é –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ò–õ–ò.

**–ü—Ä–∏–º–µ—Ä:**

```python
query |= Q(category__name__icontains=search_query)
```

–≠—Ç–æ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ —Å–ª–µ–¥—É—é—â–µ–º—É:

```python
query = query | Q(category__name__icontains=search_query)
```

### –î—Ä—É–≥–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã

- `&` (–ò): `query &= Q(condition)`
- `~` (–ù–ï): `~Q(condition)`

### –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —É—Å–ª–æ–≤–∏–π

–£—Å–ª–æ–≤–∏—è –º–æ–∂–Ω–æ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —Å–∫–æ–±–æ–∫:

```python
Q(condition1) & (Q(condition2) | Q(condition3))
```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–¥

1. –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É –∏ —Ç–µ–∫—Å—Ç—É.
2. –ó–∞—Ç–µ–º, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —á–µ–∫–±–æ–∫—Å–æ–≤, –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `|=`.
3. –ö–∞–∂–¥–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ —Ä–∞—Å—à–∏—Ä—è–µ—Ç –æ–±–ª–∞—Å—Ç—å –ø–æ–∏—Å–∫–∞.
4. –í –∫–æ–Ω—Ü–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –º–µ—Ç–æ–¥ `distinct()`, —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–æ—è–≤–∏—Ç—å—Å—è –∏–∑-–∑–∞ JOIN-–∑–∞–ø—Ä–æ—Å–æ–≤.

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ —É—Å–ª–æ–≤–∏–π –∏ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –∏—Ö –≤ –∫–æ–Ω—Ü–µ:

```python
conditions = [Q(title__icontains=search_query), Q(text__icontains=search_query)]
if search_category:
    conditions.append(Q(category__name__icontains=search_query))
# ... –¥–æ–±–∞–≤–ª—è–µ–º –¥—Ä—É–≥–∏–µ —É—Å–ª–æ–≤–∏—è
query = reduce(operator.or_, conditions)
```

–î–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Q-–æ–±—ä–µ–∫—Ç—ã –≤–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ `filter()`:

```python
Post.objects.filter(
    Q(title__icontains=search_query) |
    Q(text__icontains=search_query) |
    Q(category__name__icontains=search_query)
)
```

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥–∏–±–∫–∏–µ –∏ –º–æ—â–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –∞–¥–∞–ø—Ç–∏—Ä—É—è—Å—å –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º —É—Å–ª–æ–≤–∏–π –ø–æ–∏—Å–∫–∞.


## Lesson 54. Django ORM. Django Debug Toolbar

## Django Debug Toolbar üõ†Ô∏è

Django Debug Toolbar ‚Äì —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Å Django. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö, –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–∏—Ö –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –≤–∞—à–µ–≥–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ç–∞–∫–∏—Ö –∫–∞–∫:

- –°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚è±Ô∏è
- –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –°–£–ë–î (—á–∞—Å—Ç–æ—Ç–∞ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤) üìä
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö ‚úÖ


>[!info] –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏
>https://pypi.org/project/django-debug-toolbar/
### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç** —á–µ—Ä–µ–∑ pip:

```shell
pip install django-debug-toolbar
```

   –ù–µ –∑–∞–±—É–¥—å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ –≤–∞—à `requirements.txt` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ settings.py**:

   –í —Ñ–∞–π–ª–µ `settings.py` –≤–∞—à–µ–≥–æ Django –ø—Ä–æ–µ–∫—Ç–∞ —Å–¥–µ–ª–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ:

   - –î–æ–±–∞–≤—å—Ç–µ `'debug_toolbar'` –≤ `INSTALLED_APPS`:

–≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã Django –º–æ–≥ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å Django Debug Toolbar –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ. –í–∞—à–∞ —Å–µ–∫—Ü–∏—è `INSTALLED_APPS` –¥–æ–ª–∂–Ω–∞ –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

```python
 INSTALLED_APPS = [
	 ...
	 'debug_toolbar',
	 ...
]
```

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (`STATIC_URL = '/static/'` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).

- –î–æ–±–∞–≤—å—Ç–µ Debug Toolbar –≤ —Å–ø–∏—Å–æ–∫ `MIDDLEWARE`:

–≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã Debug Toolbar –º–æ–≥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—É—é –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞–±–æ—Ç–µ –≤–∞—à–µ–≥–æ Django-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –î–ª—è —ç—Ç–æ–≥–æ, –≤–∞–º –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É `'debug_toolbar.middleware.DebugToolbarMiddleware'` –≤ —Å–ø–∏—Å–æ–∫ `MIDDLEWARE`
```python
 MIDDLEWARE = [
	 ...
	 'debug_toolbar.middleware.DebugToolbarMiddleware',
	 ...
 ]
```
   - –£–∫–∞–∂–∏—Ç–µ –≤–∞—à –ª–æ–∫–∞–ª—å–Ω—ã–π IP –≤ `INTERNAL_IPS`:
     
```python
     INTERNAL_IPS = [
         # ...
         '127.0.0.1',
         # ...
     ]
```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ urls.py**:

   –í —Ñ–∞–π–ª–µ `urls.py` **–æ—Å–Ω–æ–≤–Ω–æ–≥–æ** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

```python
   from django.urls import include, path
   # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ settings –∏ static, –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
   from django.conf import settings
   from django.conf.urls.static import static

   urlpatterns = [
       # –í–∞—à–∏ URL-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
       ...
   ]

   if settings.DEBUG:
       import debug_toolbar
       urlpatterns = [
           path('__debug__/', include(debug_toolbar.urls)),
           # –¥—Ä—É–≥–∏–µ URL-–ø–∞—Ç—Ç–µ—Ä–Ω—ã
       ] + urlpatterns
```
–≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–º–æ, –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å Debug Toolbar –≤ –≤–∞—à–µ–º Django –ø—Ä–æ–µ–∫—Ç–µ, –∫–æ–≥–¥–∞ –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏ (DEBUG = True). Debug Toolbar –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–µ–∑–Ω—É—é –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –≤–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é, –≤–∫–ª—é—á–∞—è –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.

### `Select_related` –∏ `Prefetch_related`

`Select_related` - –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –æ–¥–∏–Ω-–∫–æ-–º–Ω–æ–≥–∏–º. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å N+1 –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ–≥–¥–∞ –≤—ã –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã.

`Prefetch_related` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å N+1 –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ–≥–¥–∞ –≤—ã –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã.

### –û–±—ä–µ–∫—Ç `Prefetch`

–ò–¥–µ—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –í–°–ï–ì–û –≤ –¥–µ—Ç–∞–ª—å–Ω–æ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –ø–æ—Å—Ç–∞.
```python
def post_by_slug(request, post_slug):
    # –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å—Ç —Å–æ –≤—Å–µ–º–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
    post = get_object_or_404(
        Post.objects.select_related('author', 'category')
        .prefetch_related('tags')
        .prefetch_related(
            Prefetch(
                'comments',
                queryset=Comment.objects.select_related('author')
                .filter(status='accepted')
                .order_by('created_at')
                .only('text', 'created_at', 'author__username'),
                to_attr='filtered_comments'
            )
        ),
        slug=post_slug
    )

    # –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ view –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–π –∂–µ

```